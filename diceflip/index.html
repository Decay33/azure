<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flip Dice - Match 3 Game</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="scanline"></div>
    <div class="circuit-lines">
        <div class="circuit-line horizontal-line" style="top: 12%; left: 6%; width: 160px;"></div>
        <div class="circuit-line vertical-line" style="top: 28%; left: 10%; height: 140px;"></div>
        <div class="circuit-dot" style="top: 28%; left: 10%;"></div>
        <div class="circuit-line horizontal-line" style="top: 70%; right: 8%; width: 200px;"></div>
        <div class="circuit-line vertical-line" style="top: 55%; right: 22%; height: 150px;"></div>
        <div class="circuit-dot" style="top: 55%; right: 22%;"></div>
        <div class="circuit-line horizontal-line" style="top: 42%; right: 30%; width: 120px;"></div>
        <div class="circuit-dot" style="top: 42%; right: 30%;"></div>
    </div>

    <nav class="nav-bar">
        <a href="/" class="nav-logo"><span class="nav-logo-the">THE</span>AI<span>Democracy</span></a>
        <div class="nav-links">
            <a href="/" class="nav-link">Home</a>
            <a href="/#game-list" class="nav-link">Games</a>
            <a href="/tools/" class="nav-link">Tools</a>
            <a href="/#contact" class="nav-link">Contact</a>
            <a href="/privacy.html" class="nav-link">Privacy</a>
            <a href="/members/" class="nav-link">Members</a>
        </div>
        <div class="nav-links nav-auth">
            <a id="sign-in-link" class="nav-link" href="/.auth/login/google?post_login_redirect_uri=/diceflip/index.html">Sign In</a>
            <a id="sign-out-link" class="nav-link hidden" href="/.auth/logout?post_logout_redirect_uri=/diceflip/index.html">Sign Out</a>
        </div>
    </nav>

    <div class="auth-banner" id="auth-banner">
        <span id="auth-status">You&apos;re browsing as a guest. <a href="/.auth/login/google?post_login_redirect_uri=/diceflip/index.html">Sign in with Google</a> to save your high scores.</span>
    </div>

    <main class="flip-main">
        <header class="flip-header">
            <h1 data-text="Flip Dice">Flip Dice</h1>
            <p class="muted">Chain together matching dice faces, unlock skins, and climb the global leaderboard. Scores persist when you sign in.</p>
        </header>

        <section class="flip-layout">
            <div class="flip-play">
    <!-- Start Screen -->
    <div id="start-screen" class="screen-overlay">
        <div class="start-screen-content">
            <div class="game-title">
                <h1>üé≤ FLIP DICE</h1>
                <p class="game-subtitle">Match 3 Puzzle Adventure</p>
            </div>
            
            <div class="start-menu">
                <button id="start-game-btn" class="menu-btn primary">
                    <span class="btn-icon">üéÆ</span>
                    <span class="btn-text">START GAME</span>
                </button>
                
                <button id="continue-game-btn" class="menu-btn primary hidden">
                    <span class="btn-icon">‚ñ∂Ô∏è</span>
                    <span class="btn-text">CONTINUE GAME</span>
                </button>
                
                <button id="dice-skins-btn" class="menu-btn secondary">
                    <span class="btn-icon">üé®</span>
                    <span class="btn-text">DICE SKINS</span>
                </button>
                
                <button id="view-stats-btn" class="menu-btn secondary">
                    <span class="btn-icon">üìä</span>
                    <span class="btn-text">HIGH SCORES</span>
                </button>
                
                <button id="how-to-play-btn" class="menu-btn secondary">
                    <span class="btn-icon">‚ùì</span>
                    <span class="btn-text">HOW TO PLAY</span>
                </button>
            </div>
            
            <!-- High Scores Panel -->
            <div id="high-scores-panel" class="stats-panel hidden">
                <h2>üèÜ High Scores & Statistics</h2>
                <div class="stats-grid">
                    <div class="stat-category">
                        <h3>üéØ Best Scores</h3>
                        <div class="stat-item">
                            <span class="stat-label">Highest Score:</span>
                            <span id="best-total-score" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Best Level:</span>
                            <span id="best-level" class="stat-value">1</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Total Games:</span>
                            <span id="total-games" class="stat-value">0</span>
                        </div>
                    </div>
                    
                    <div class="stat-category">
                        <h3>üîó Match Combos</h3>
                        <div class="stat-item">
                            <span class="stat-label">3-Matches:</span>
                            <span id="best-3-matches" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">4-Matches:</span>
                            <span id="best-4-matches" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">5-Matches:</span>
                            <span id="best-5-matches" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">6+ Matches:</span>
                            <span id="best-6-matches" class="stat-value">0</span>
                        </div>
                    </div>
                    
                    <div class="stat-category">
                        <h3>üé≤ Numbers Matched</h3>
                        <div class="stat-item">
                            <span class="stat-label">1Ô∏è‚É£ Ones:</span>
                            <span id="best-ones-matched" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">2Ô∏è‚É£ Twos:</span>
                            <span id="best-twos-matched" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">3Ô∏è‚É£ Threes:</span>
                            <span id="best-threes-matched" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">4Ô∏è‚É£ Fours:</span>
                            <span id="best-fours-matched" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">5Ô∏è‚É£ Fives:</span>
                            <span id="best-fives-matched" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">6Ô∏è‚É£ Sixes:</span>
                            <span id="best-sixes-matched" class="stat-value">0</span>
                        </div>
                    </div>
                </div>
                <button id="close-stats-btn" class="menu-btn secondary">Close</button>
            </div>
            
            <!-- How to Play Panel -->
            <div id="how-to-play-panel" class="stats-panel hidden">
                <h2>üéÆ How to Play</h2>
                <div class="how-to-play-content">
                    <div class="instruction-section">
                        <h3>üéØ Objective</h3>
                        <p>Create matches of 3+ identical numbers by flipping dice with directional arrows.</p>
                    </div>
                    
                    <div class="instruction-section">
                        <h3>üé≤ Controls</h3>
                        <ul>
                            <li><strong>Click a dice</strong> to select it</li>
                            <li><strong>Choose direction</strong> (‚Üë‚Üì‚Üê‚Üí) to flip</li>
                            <li><strong>Preview numbers</strong> show result</li>
                            <li><strong>Create chains</strong> for bonus points</li>
                        </ul>
                    </div>
                    
                    <div class="instruction-section">
                        <h3>üèÜ Scoring</h3>
                        <ul>
                            <li><strong>3 match:</strong> 100 points</li>
                            <li><strong>4 match:</strong> 200 points</li>
                            <li><strong>5+ match:</strong> 400+ points</li>
                            <li><strong>Combos:</strong> +50 per chain</li>
                        </ul>
                    </div>
                </div>
                <button id="close-how-to-play-btn" class="menu-btn secondary">Close</button>
            </div>
            
            <!-- Dice Skins Panel -->
            <div id="dice-skins-panel" class="stats-panel hidden">
                <h2>üé® Dice Skins</h2>
                <div class="skins-grid">
                    <div class="skin-item" data-skin="classic">
                        <div class="skin-preview">
                            <div class="preview-dice classic-skin">
                                <div class="dice-face front color-1"><div class="dice-dots dots-1"><div class="dice-dot dot-5"></div></div></div>
                            </div>
                            <div class="preview-dice classic-skin">
                                <div class="dice-face front color-3"><div class="dice-dots dots-3"><div class="dice-dot dot-1"></div><div class="dice-dot dot-5"></div><div class="dice-dot dot-9"></div></div></div>
                            </div>
                            <div class="preview-dice classic-skin">
                                <div class="dice-face front color-6"><div class="dice-dots dots-6"><div class="dice-dot dot-1"></div><div class="dice-dot dot-3"></div><div class="dice-dot dot-4"></div><div class="dice-dot dot-6"></div><div class="dice-dot dot-7"></div><div class="dice-dot dot-9"></div></div></div>
                            </div>
                        </div>
                        <div class="skin-info">
                            <h3>Classic</h3>
                            <p class="skin-status unlocked">‚úì Unlocked</p>
                            <button class="skin-select-btn selected" data-skin="classic">Equipped</button>
                        </div>
                    </div>
                    
                    <div class="skin-item" data-skin="pastel">
                        <div class="skin-preview">
                            <div class="preview-dice pastel-skin">
                                <div class="dice-face front color-1"><div class="dice-dots dots-1"><div class="dice-dot dot-5"></div></div></div>
                            </div>
                            <div class="preview-dice pastel-skin">
                                <div class="dice-face front color-3"><div class="dice-dots dots-3"><div class="dice-dot dot-1"></div><div class="dice-dot dot-5"></div><div class="dice-dot dot-9"></div></div></div>
                            </div>
                            <div class="preview-dice pastel-skin">
                                <div class="dice-face front color-6"><div class="dice-dots dots-6"><div class="dice-dot dot-1"></div><div class="dice-dot dot-3"></div><div class="dice-dot dot-4"></div><div class="dice-dot dot-6"></div><div class="dice-dot dot-7"></div><div class="dice-dot dot-9"></div></div></div>
                            </div>
                        </div>
                        <div class="skin-info">
                            <h3>Pastel Dreams</h3>
                            <p class="skin-status locked">üîí Reach Level 10</p>
                            <button class="skin-select-btn locked" data-skin="pastel" disabled>Locked</button>
                        </div>
                    </div>
                    
                    <div class="skin-item" data-skin="neon">
                        <div class="skin-preview">
                            <div class="preview-dice neon-skin">
                                <div class="dice-face front color-1"><div class="dice-dots dots-1"><div class="dice-dot dot-5"></div></div></div>
                            </div>
                            <div class="preview-dice neon-skin">
                                <div class="dice-face front color-3"><div class="dice-dots dots-3"><div class="dice-dot dot-1"></div><div class="dice-dot dot-5"></div><div class="dice-dot dot-9"></div></div></div>
                            </div>
                            <div class="preview-dice neon-skin">
                                <div class="dice-face front color-6"><div class="dice-dots dots-6"><div class="dice-dot dot-1"></div><div class="dice-dot dot-3"></div><div class="dice-dot dot-4"></div><div class="dice-dot dot-6"></div><div class="dice-dot dot-7"></div><div class="dice-dot dot-9"></div></div></div>
                            </div>
                        </div>
                        <div class="skin-info">
                            <h3>Neon Glow</h3>
                            <p class="skin-status locked">üîí Reach Level 25</p>
                            <button class="skin-select-btn locked" data-skin="neon" disabled>Locked</button>
                        </div>
                    </div>
                    
                    <div class="skin-item" data-skin="galaxy">
                        <div class="skin-preview">
                            <div class="preview-dice galaxy-skin">
                                <div class="dice-face front color-1"><div class="dice-dots dots-1"><div class="dice-dot dot-5"></div></div></div>
                            </div>
                            <div class="preview-dice galaxy-skin">
                                <div class="dice-face front color-3"><div class="dice-dots dots-3"><div class="dice-dot dot-1"></div><div class="dice-dot dot-5"></div><div class="dice-dot dot-9"></div></div></div>
                            </div>
                            <div class="preview-dice galaxy-skin">
                                <div class="dice-face front color-6"><div class="dice-dots dots-6"><div class="dice-dot dot-1"></div><div class="dice-dot dot-3"></div><div class="dice-dot dot-4"></div><div class="dice-dot dot-6"></div><div class="dice-dot dot-7"></div><div class="dice-dot dot-9"></div></div></div>
                            </div>
                        </div>
                        <div class="skin-info">
                            <h3>Galaxy</h3>
                            <p class="skin-status locked">üîí Reach Level 50</p>
                            <button class="skin-select-btn locked" data-skin="galaxy" disabled>Locked</button>
                        </div>
                    </div>
                </div>
                <button id="close-skins-btn" class="menu-btn secondary">Close</button>
            </div>
        </div>
    </div>

    <div class="game-container">
        <div class="game-top-row">
            <div class="score-card">
                <div class="score-grid">
                    <div class="metric">
                        <span class="label">Level Score</span>
                        <span id="current-score" class="metric-value">0</span>
                    </div>
                    <div class="metric">
                        <span class="label">Total Score</span>
                        <span id="running-score" class="metric-value">0</span>
                    </div>
                    <div class="metric">
                        <span class="label">High Score</span>
                        <span id="high-score" class="metric-value">0</span>
                    </div>
                    <div class="metric">
                        <span class="label">Goal</span>
                        <span id="level-goal" class="metric-value">1000</span>
                    </div>
                    <div class="metric">
                        <span class="label">Level</span>
                        <span id="current-level" class="metric-value">1</span>
                    </div>
                </div>
                <div class="limits-card">
                    <div class="limits-header">
                        <span class="limits-title">Flip Limits</span>
                        <span class="limits-subtitle">+1 random every 3 levels</span>
                    </div>
                    <div class="arrow-counters">
                        <div class="arrow-counter">
                            <span class="arrow-icon">&uarr;</span>
                            <span id="arrows-up">3</span>
                        </div>
                        <div class="arrow-counter">
                            <span class="arrow-icon">&darr;</span>
                            <span id="arrows-down">3</span>
                        </div>
                        <div class="arrow-counter">
                            <span class="arrow-icon">&larr;</span>
                            <span id="arrows-left">3</span>
                        </div>
                        <div class="arrow-counter">
                            <span class="arrow-icon">&rarr;</span>
                            <span id="arrows-right">3</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="leaderboard-card">
                <h2>Flip Dice Leaderboard</h2>
                <p class="muted" id="leaderboard-empty">Sign in to see the top rollers.</p>
                <ol id="leaderboard-list" class="score-list"></ol>
                <div id="leaderboard-self" class="score-self hidden">
                    <span class="rank" id="self-rank">--</span>
                    <div class="player-details">
                        <span class="player-name" id="self-name">You</span>
                        <span class="player-updated muted" id="self-updated"></span>
                    </div>
                    <span class="score-value" id="self-score">0</span>
                </div>
                <p id="diceflip-signin-message" class="muted hidden">Sign in with Google to save your scores and appear here.</p>
            </div>
        </div>

        <!-- Game Board with Instructions and Power-ups -->
        <div class="game-board-container">
            <!-- Instructions Panel -->
            <div class="instructions-panel">
                <h3>üéÆ How to Play</h3>
                <div class="instruction-section">
                    <h4>üéØ Objective</h4>
                    <p>Create matches of 3+ identical numbers by flipping dice with directional arrows.</p>
                </div>
                
                <div class="instruction-section">
                    <h4>üé≤ Controls</h4>
                    <ul>
                        <li><strong>Click a dice</strong> to select it</li>
                        <li><strong>Choose direction</strong> (‚Üë‚Üì‚Üê‚Üí) to flip</li>
                        <li><strong>Preview numbers</strong> show result</li>
                        <li><strong>Create chains</strong> for bonus points</li>
                    </ul>
                </div>
                
                <div class="instruction-section">
                    <h4>üéä Power-ups</h4>
                    <ul>
                        <li><strong>üéØ Free Move:</strong> 5-in-a-row match</li>
                        <li><strong>üí£ 3x3 Bomb:</strong> 3x combo chain</li>
                        <li><strong>üåü Wild Bomb:</strong> 5x combo chain</li>
                    </ul>
                </div>
                
                <div class="instruction-section">
                    <h4>üèÜ Scoring</h4>
                    <ul>
                        <li><strong>3 match:</strong> 100 points</li>
                        <li><strong>4 match:</strong> 200 points</li>
                        <li><strong>5+ match:</strong> 400+ points</li>
                        <li><strong>Combos:</strong> +50 per chain</li>
                    </ul>
                </div>
            </div>
            
            <div id="game-board" class="game-board">
                <!-- 8x8 grid of dice will be generated here -->
            </div>
            
            <!-- Power-up Menu -->
            <div class="powerup-menu">
                <h3>Power-ups</h3>
                <div class="powerup-item" id="free-move-powerup" data-powerup="free-move">
                    <div class="powerup-icon">üéØ</div>
                    <div class="powerup-name">Free Move</div>
                    <div class="powerup-count" id="free-move-count">0</div>
                    <div class="powerup-description">5-in-a-row match</div>
                </div>
                
                <div class="powerup-item" id="bomb-3x3-powerup" data-powerup="bomb-3x3">
                    <div class="powerup-icon">üí£</div>
                    <div class="powerup-name">3x3 Bomb</div>
                    <div class="powerup-count" id="bomb-3x3-count">0</div>
                    <div class="powerup-description">3x combo chain</div>
                </div>
                
                <div class="powerup-item" id="wild-bomb-powerup" data-powerup="wild-bomb">
                    <div class="powerup-icon">üåü</div>
                    <div class="powerup-name">Wild Bomb</div>
                    <div class="powerup-count" id="wild-bomb-count">0</div>
                    <div class="powerup-description">5x combo chain</div>
                </div>
            </div>
        </div>

        <!-- Bottom Bar -->
        <div class="bottom-bar">
            <div class="left-controls">
                <button id="hint-btn" class="game-btn">üí° Hint</button>
                <button id="undo-btn" class="game-btn">‚Ü∂ Undo</button>
                <button id="save-game-btn" class="game-btn">üíæ Save</button>
            </div>
            <div class="combo-display">
                <span id="combo-text"></span>
            </div>
            <div class="right-controls">
                <button id="sound-toggle" class="game-btn">üîä Sound</button>
                <input type="range" id="volume-slider" min="0" max="100" value="30" class="volume-slider">
            </div>
        </div>

        <!-- Game Messages -->
        <div id="game-messages" class="game-messages">
            <div id="level-complete" class="message-overlay hidden">
                <div class="message-content">
                    <h2>Level Complete!</h2>
                    <p>Level Score: <span id="final-score"></span></p>
                    <p>Bonus: <span id="bonus-points"></span> points for unused arrows</p>
                    <p>Total Score: <span id="running-score-display"></span></p>
                    <button id="next-level-btn" class="game-btn">Next Level</button>
                </div>
            </div>
            
            <div id="game-over" class="message-overlay hidden">
                <div class="message-content">
                    <h2>Game Over</h2>
                    <p>No more moves available!</p>
                    <p>Level Score: <span id="game-over-score"></span></p>
                    <p>Total Score: <span id="game-over-running-score"></span></p>
                    <button id="restart-btn" class="game-btn">Play Again</button>
                </div>
            </div>
        </div>
        <p id="diceflip-signin-callout" class="flip-callout hidden">Sign in to save your high scores to the global leaderboard.</p>
    </div>

    <!-- Enhanced Game Over Screen -->
    <div id="enhanced-game-over" class="screen-overlay hidden">
        <div class="game-over-content">
            <div class="game-over-header">
                <h1>üéÆ GAME OVER</h1>
                <p class="final-score-display">Final Score: <span id="enhanced-final-score">0</span></p>
                <p class="level-reached">Level Reached: <span id="enhanced-level-reached">1</span></p>
            </div>
            
            <div class="game-stats-grid">
                <div class="stat-category-game">
                    <h3>üîó Match Statistics</h3>
                    <div class="stat-item-game">
                        <span class="stat-label-game">3-Matches:</span>
                        <span id="game-3-matches" class="stat-value-game">0</span>
                    </div>
                    <div class="stat-item-game">
                        <span class="stat-label-game">4-Matches:</span>
                        <span id="game-4-matches" class="stat-value-game">0</span>
                    </div>
                    <div class="stat-item-game">
                        <span class="stat-label-game">5-Matches:</span>
                        <span id="game-5-matches" class="stat-value-game">0</span>
                    </div>
                    <div class="stat-item-game">
                        <span class="stat-label-game">6+ Matches:</span>
                        <span id="game-6-matches" class="stat-value-game">0</span>
                    </div>
                </div>
                
                <div class="stat-category-game">
                    <h3>üé≤ Numbers Matched</h3>
                    <div class="stat-item-game">
                        <span class="stat-label-game">1Ô∏è‚É£ Ones:</span>
                        <span id="game-ones-matched" class="stat-value-game">0</span>
                    </div>
                    <div class="stat-item-game">
                        <span class="stat-label-game">2Ô∏è‚É£ Twos:</span>
                        <span id="game-twos-matched" class="stat-value-game">0</span>
                    </div>
                    <div class="stat-item-game">
                        <span class="stat-label-game">3Ô∏è‚É£ Threes:</span>
                        <span id="game-threes-matched" class="stat-value-game">0</span>
                    </div>
                    <div class="stat-item-game">
                        <span class="stat-label-game">4Ô∏è‚É£ Fours:</span>
                        <span id="game-fours-matched" class="stat-value-game">0</span>
                    </div>
                    <div class="stat-item-game">
                        <span class="stat-label-game">5Ô∏è‚É£ Fives:</span>
                        <span id="game-fives-matched" class="stat-value-game">0</span>
                    </div>
                    <div class="stat-item-game">
                        <span class="stat-label-game">6Ô∏è‚É£ Sixes:</span>
                        <span id="game-sixes-matched" class="stat-value-game">0</span>
                    </div>
                </div>
            </div>
            
            <div class="game-over-actions">
                <button id="play-again-btn" class="menu-btn primary">
                    <span class="btn-icon">üîÑ</span>
                    <span class="btn-text">PLAY AGAIN</span>
                </button>
                <button id="back-to-menu-btn" class="menu-btn secondary">
                    <span class="btn-icon">üè†</span>
                    <span class="btn-text">MAIN MENU</span>
                </button>
            </div>
            
            <div id="new-record" class="new-record-banner hidden">
                <span class="record-icon">üèÜ</span>
                <span class="record-text">NEW HIGH SCORE!</span>
                <span class="record-icon">üèÜ</span>
            </div>
        </div>
    </div>

            </div>
        </section>
    </main>

    <footer>
        <p>Powered by Azure Static Web Apps, Cosmos DB, and EasyAuth. Your progress is protected.</p>
        <div class="footer-links">
            <a href="/privacy.html" class="footer-link">Privacy Policy</a>
            <a href="/#contact" class="footer-link">Contact Us</a>
            <a href="/.auth/logout?post_logout_redirect_uri=/diceflip/index.html" class="footer-link">Sign Out</a>
        </div>
    </footer>

    <script src="sound.js"></script>
    <script src="script.js"></script>
</body>
</html>
